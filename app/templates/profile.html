{% extends "base.html" %}

{% block content %}
<section class="rounded-2xl border border-gray-100 bg-white p-8 shadow-sm">
  <div class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
    <div>
      <p class="text-xs uppercase tracking-[0.3em] text-slate-400">Account</p>
      <h1 class="text-3xl font-bold tracking-tight text-slate-900 md:text-4xl">Profile</h1>
      <p class="mt-2 text-sm text-slate-500">Manage contact details and usage stats.</p>
    </div>
  </div>

  <div class="mt-6 grid gap-4 md:grid-cols-3">
    <div class="rounded-xl border border-gray-100 bg-white px-4 py-3">
      <p class="text-xs uppercase tracking-[0.2em] text-slate-400">Username</p>
      <p class="mt-2 text-sm font-semibold text-slate-900">{{ current_user.email }}</p>
    </div>
    <div class="rounded-xl border border-gray-100 bg-white px-4 py-3">
      <p class="text-xs uppercase tracking-[0.2em] text-slate-400">Total tokens</p>
      <p class="mt-2 text-2xl font-semibold text-slate-900">{{ total_tokens }}</p>
      <p class="mt-1 text-xs text-slate-500">Summarization usage to date.</p>
    </div>
    <div class="rounded-xl border border-gray-100 bg-white px-4 py-3">
      <p class="text-xs uppercase tracking-[0.2em] text-slate-400">Created</p>
      <p class="mt-2 text-sm text-slate-700">{{ current_user.created_at | format_dt }}</p>
    </div>
  </div>

  {% if session_expires_in_days is not none %}
    <div class="mt-6 rounded-lg border border-amber-200 bg-amber-50 px-4 py-3 text-sm text-amber-800">
      Session expires in {{ session_expires_in_days }} day{% if session_expires_in_days != 1 %}s{% endif %}.
    </div>
  {% endif %}

  <form class="mt-8 max-w-xl space-y-4" method="post" action="/profile">
    <div>
      <label class="text-sm font-medium text-slate-700" for="mobile_phone">Mobile phone</label>
      <p class="mt-1 text-xs text-slate-500">Used for future WhatsApp alerts and replies.</p>
      <input
        class="mt-3 w-full rounded-lg border border-gray-200 bg-white px-4 py-3 text-sm shadow-sm focus:border-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-600/20"
        id="mobile_phone"
        name="mobile_phone"
        placeholder="+1 555 123 4567"
        type="tel"
        value="{{ current_user.mobile_phone or '' }}"
      />
    </div>
    <button class="rounded-lg bg-slate-900 px-6 py-3 text-sm font-medium text-white shadow-lg shadow-slate-900/10 transition hover:bg-slate-800" type="submit">
      Save profile
    </button>
  </form>
</section>
{% endblock %}
